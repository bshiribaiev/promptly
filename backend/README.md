# Spring Backend (WebFlux) for Ingest + Ask

## Prerequisites

- Java 17+
- Gradle (wrapper will be generated by IntelliJ/IDE on import)

## Run

```
./gradlew bootRun
```

Server runs on `http://localhost:8081`.

## Endpoints

- `GET /healthz` → `{ status: "ok" }`
- `POST /ingest` (multipart form) → `files=@/path/file.pdf` or `.txt/.md`
- `POST /ask` (JSON)

### curl examples

```
curl http://localhost:8081/healthz

curl -X POST http://localhost:8081/ingest \
  -F "files=@../demo/sample-docs/meeting-notes.txt" \
  -F "files=@../demo/sample-docs/product-spec.pdf"

curl -X POST http://localhost:8081/ask \
  -H 'Content-Type: application/json' \
  -d '{
    "text": "Kick off a plan for this product",
    "templateId": "start_project",
    "topK": 6,
    "contextBudgetTokens": 600,
    "returnAnswer": false
  }'
```

## Notes

- Retrieval is in-memory with naive scoring; replace with Lucene later for TF‑IDF.
- Templates are baked in `Templates.java` and can be externalized.
- LLM client is stubbed; wire OpenAI/Gemini/Ollama via `WebClient` next.
